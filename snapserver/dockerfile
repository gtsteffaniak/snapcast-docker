# Snapserver dockerfile

FROM gtstef/snapbase as base

FROM ubuntu:22.10
ENV DEBIAN_FRONTEND=noninteractive
RUN apt update && apt install \
    libavahi-client-dev avahi-daemon mpd \
    curl -y --no-install-recommends
WORKDIR /opt
COPY src .
COPY --from=base /usr/local/bin/ /usr/local/bin/
COPY --from=base /opt/snapcast/server/snapserver /usr/local/bin/
RUN chmod 777 -R /opt/mpd
RUN chmod +x run.sh

ENTRYPOINT ["./run.sh"]
